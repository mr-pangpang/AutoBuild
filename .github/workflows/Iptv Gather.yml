name: 自动保存TV.txt到DISK/TV目录
on:
  # 触发条件：可根据需要修改（如push、手动触发等）
  push:
    branches: [main]  # 替换为你的主分支名
  workflow_dispatch:  # 允许手动触发

jobs:
  save-file:
    runs-on: ubuntu-latest
    steps:
      - name: 拉取仓库代码
        uses: actions/checkout@v4

      - name: 创建DISK/TV目录
        run: mkdir -p DISK/TV  # -p确保父目录不存在时自动创建

      - name: 生成/处理TV.txt（替换为你的实际操作）
        run: |
          # 此处替换为你原本生成TV.txt的命令（如curl下载、echo写入等）
          # 示例：echo "测试内容" > TV.txt
          # （请根据你的实际需求修改这一步，确保生成TV.txt文件）

      - name: 移动文件到目标路径
        run: mv TV.txt DISK/TV/  # 将文件移动到DISK/TV子目录下

      - name: 提交并推送变更
        run: |
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"
          git add DISK/TV/TV.txt
          git commit -m "自动保存TV.txt到DISK/TV目录" || echo "无文件变更，无需提交"
          git push
