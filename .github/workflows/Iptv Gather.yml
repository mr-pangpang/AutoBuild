name: Update Gather Content

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * *'

jobs:
  update-gather:
    runs-on: ubuntu-latest
    
    permissions:
      contents: write
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Debug network connectivity
      run: |
        echo "🔍 开始网络诊断..."
        echo "目标URL: https://tv-1.iill.top/m3u/Gather"
        
        # 测试网络连通性
        echo "1. 测试DNS解析..."
        nslookup tv-1.iill.top || echo "DNS解析可能有问题"
        
        echo "2. 测试网络连通性..."
        ping -c 3 tv-1.iill.top || echo "Ping测试失败（可能被禁止）"
        
        echo "3. 测试HTTP连接..."
        curl -I -L --max-time 10 "https://tv-1.iill.top/m3u/Gather" || echo "HTTP连接测试失败"

    - name: Fetch content with detailed debugging
      run: |
        echo "🔄
