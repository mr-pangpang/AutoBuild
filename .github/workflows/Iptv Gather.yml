name: Update Gather Content

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * *'

jobs:
  update-gather:
    runs-on: ubuntu-latest
    
    permissions:
      contents: write
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Debug network connectivity
      run: |
        echo "ğŸ” å¼€å§‹ç½‘ç»œè¯Šæ–­..."
        echo "ç›®æ ‡URL: https://tv-1.iill.top/m3u/Gather"
        
        # æµ‹è¯•ç½‘ç»œè¿é€šæ€§
        echo "1. æµ‹è¯•DNSè§£æ..."
        nslookup tv-1.iill.top || echo "DNSè§£æå¯èƒ½æœ‰é—®é¢˜"
        
        echo "2. æµ‹è¯•ç½‘ç»œè¿é€šæ€§..."
        ping -c 3 tv-1.iill.top || echo "Pingæµ‹è¯•å¤±è´¥ï¼ˆå¯èƒ½è¢«ç¦æ­¢ï¼‰"
        
        echo "3. æµ‹è¯•HTTPè¿æ¥..."
        curl -I -L --max-time 10 "https://tv-1.iill.top/m3u/Gather" || echo "HTTPè¿æ¥æµ‹è¯•å¤±è´¥"

    - name: Fetch content with detailed debugging
      run: |
        echo "ğŸ”„
