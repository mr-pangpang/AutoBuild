name: Test TVBOX Download

on: workflow_dispatch

jobs:
  test:
    runs-on: windows-latest
    
    steps:
    - name: Test curl download
      shell: cmd
      run: |
        echo 测试curl下载...
        curl -s -L "https://tv-1.iill.top/m3u/Gather" -o test.txt
        
        echo 下载结果：
        if exist test.txt (
          echo 文件已创建
          echo 文件大小: 
          for /f %%i in ('dir /-c test.txt ^| find "test.txt"') do echo %%i
          echo 前3行内容：
          set /p line1=<test.txt
          echo 1: !line1!
          more +1 test.txt | head -2
        ) else (
          echo 文件创建失败
        )
